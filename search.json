[
  {
    "objectID": "02a-senate-models.html",
    "href": "02a-senate-models.html",
    "title": "Senate",
    "section": "",
    "text": "Our first task is to extract Senate Bills and their related information from the Legislative Information System. This contains data on senate bills, their sponsors, evolution, and timings of actions from the 13th congress onwards.\n\n\nThere are some common elements found in the Senate Bill information, such as Senators, Senate Committees, and of course Senate Bills. We create {pydantic} models to encapsulate their data and get validation for free:\n\n\n\n\n\n\n\n\n Senator (name:str)\n\nA member of the Senate\n\n\n\n\n\n\n\n\n SenateCommittee (name:str)\n\nA committee in the Senate\n\n\nThe SenateBill is the main model that we’d like to extract and will be the main focus of this part of the analysis.\n\n\n\n\n\n\n SenateBill (url:str, congress:int, billno:str, congress_text:str,\n             billno_text:str, title:str, long_title:str,\n             filing_date:datetime.date,\n             filers:Optional[List[__main__.Senator]]=None,\n             links:Optional[List[legisph.website.Link]]=None, scope:str,\n             legislative_status:__main__.SenateBill.SenateBillStatus,\n             subjects:Optional[List[__main__.SenateBill.Subject]]=None, pr\n             imary_committee:Optional[List[__main__.SenateCommittee]]=None\n             , secondary_committee:Optional[List[__main__.SenateCommittee]\n             ]=None,\n             committee_reports:Optional[List[legisph.website.Link]]=None,\n             sponsors:Optional[List[__main__.Senator]]=None,\n             cosponsors:Optional[List[__main__.Senator]]=None,\n             document_certification:Optional[str]=None, floor_activity:Opt\n             ional[List[__main__.SenateBill.FloorActivity]]=None,\n             votes:Optional[List[__main__.SenateBill.Vote]]=None, legislat\n             ive_history:List[__main__.SenateBill.SenateBillStatus])\n\nThese are general measures, which if passed upon, may become laws. A bill is prefixed with S., followed by a number assigned the measure based on the order in which it is introduced. The vast majority of legislative proposals recommendations dealing with the economy, increasing penalties for certain crimes, regulation on commerce and trade, etc., are drafted in the form of bills. They also include budgetary appropriation of the government and many others. When passed by both chambers in identical form and signed by the President or repassed by Congress over a presidential veto, they become laws.\nDefinition Source"
  },
  {
    "objectID": "02b-senate-website.html",
    "href": "02b-senate-website.html",
    "title": "Senate Website",
    "section": "",
    "text": "from typing import List, Generator, Union\nfrom nbdev.showdoc import show_doc\nfrom rich import print\n\nfrom legisph.website import Website, NotFoundError, ServerError, Link\nfrom legisph.senate.models import SenateBill, Senator, SenateCommittee"
  },
  {
    "objectID": "02b-senate-website.html#fetching-senate-bills",
    "href": "02b-senate-website.html#fetching-senate-bills",
    "title": "Senate Website",
    "section": "Fetching Senate Bills",
    "text": "Fetching Senate Bills\nWe create a method that:\n\nAccesses the “All Information” tab of a senate bill given its congress number and Senate Bill number. This requires first retriving the main page, then sending a post request with some session parameters.\nBreaks up the HTML source into its component parts, in order to generate a SenateBill object.\nIn cases where server returns 200 response but the body says that there was an internal error on the part of the server, handle that use case accordingly.\n\n\n\nSenateWebsite.fetch_bill\n\n SenateWebsite.fetch_bill (congress:int, billno:str,\n                           expire_after:Union[datetime.timedelta,int]=-1)\n\nFetch and parse a bill from the Senate Website and return a SenateBill object.\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ncongress\nint\n\nCongress Number\n\n\nbillno\nstr\n\nBill number (in the format SBN-XXXX)\n\n\nexpire_after\nUnion\n-1\nPassed to CachedSession.get\n\n\nReturns\nResponse\n\n\n\n\n\nWe provide this example of SBN-2332 in the 18th congress, which was a particularly complex one, leading to an abstention vote on Third Reading but eventually still being passed into law:\n\nsenate = SenateWebsite()\nprint(senate.fetch_bill(18, \"SBN-2332\"))\n\nSenateBill(\n    url='http://legacy.senate.gov.ph/lis/bill_res.aspx?q=SBN-2332&congress=18',\n    congress=18,\n    billno='SBN-2332',\n    congress_text='18th Congress',\n    billno_text='Senate Bill No. 2332',\n    title='STATUTORY RAPE (INCREASING THE AGE)',\n    long_title='AN ACT INCREASING THE AGE FOR DETERMINING STATUTORY RAPE AND OTHER ACTS OF SEXUAL ABUSE AND \nEXPLOITATION TO PROTECT CHILDREN, AMENDING FOR THIS PURPOSE ACT NO. 3815, AS AMENDED, ALSO KNOWN AS THE REVISED \nPENAL CODE, REPUBLIC ACT NO. 8353, ALSO KNOWN AS THE ANTI-RAPE LAW OF 1997, AND REPUBLIC ACT NO. 7610, ALSO KNOWN \nAS THE SPECIAL PROTECTION OF CHILDREN AGAINST ABUSE, EXPLOITATION AND DISCRIMINATION ACT',\n    filing_date=datetime.date(2021, 7, 26),\n    filers=[\n        Senator(name='Hontiveros, Risa'),\n        Senator(name='Zubiri, Juan Miguel \"Migz\" F.'),\n        Senator(name='De Lima, Leila M.'),\n        Senator(name='Gatchalian, Win'),\n        Senator(name='Binay, Maria Lourdes Nancy S.'),\n        Senator(name='Marcos, Imee R.'),\n        Senator(name='Revilla Jr., Ramon Bong'),\n        Senator(name='Gordon, Richard J.'),\n        Senator(name='Pangilinan, Francis \"Kiko\" N.'),\n        Senator(name='Villanueva, Joel'),\n        Senator(name='Cayetano, Pia S.'),\n        Senator(name='Poe, Grace')\n    ],\n    links=[\n        Link(url='http://legacy.senate.gov.ph/lisdata/3582432274!.pdf', name='SBN-2332 (Per Ctte. Rpt. No. 279)'),\n        Link(url='http://legacy.senate.gov.ph/lisdata/3582432777!.pdf', name='SBN-2332 (Third Reading Copy)'),\n        Link(url='http://legacy.senate.gov.ph/republic_acts/ra%2011648.pdf', name='Republic Act No. 11648')\n    ],\n    scope='National',\n    legislative_status=SenateBillStatus(\n        date=datetime.date(2022, 3, 4),\n        item='Approved by the President of the Philippines'\n    ),\n    subjects=[\n        Subject(name='Statutory Rape'),\n        Subject(name='Child Abuse, Exploitation and Discrimination Act (R.A.No. 7610)'),\n        Subject(name='Revised Penal Code (R.A.No. 3815)'),\n        Subject(name='Anti-Rape')\n    ],\n    primary_committee=[SenateCommittee(name='Justice and Human Rights')],\n    secondary_committee=[SenateCommittee(name='Women, Children, Family Relations and Gender Equality')],\n    committee_reports=[\n        Link(\n            url='http://legacy.senate.gov.ph/lis/committee_rpt.aspx?congress=18&q=279',\n            name='No. 279 - Statutory Rape'\n        )\n    ],\n    sponsors=[Senator(name='Gordon, Richard J.')],\n    cosponsors=None,\n    document_certification='No Certification',\n    floor_activity=[\n        FloorActivity(\n            date=datetime.date(2021, 8, 25),\n            parliamentary_status='Co-Sponsorship Speech',\n            senators=[\n                Senator(name='Zubiri, Juan Miguel \"Migz\" F.'),\n                Senator(name='Hontiveros, Risa'),\n                Senator(name='Villanueva, Joel'),\n                Senator(name='Cayetano, Pia S.'),\n                Senator(name='Binay, Maria Lourdes Nancy S.'),\n                Senator(name='Revilla Jr., Ramon Bong'),\n                Senator(name='Gatchalian, Win')\n            ]\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 8, 25),\n            parliamentary_status='Sponsorship Speech',\n            senators=[Senator(name='Gordon, Richard J.')]\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 9, 20),\n            parliamentary_status='Interpellation',\n            senators=[\n                Senator(name='Hontiveros, Risa'),\n                Senator(name='Cayetano, Pia S.'),\n                Senator(name='Zubiri, Juan Miguel \"Migz\" F.'),\n                Senator(name='Lacson, Panfilo \"Ping\" M.'),\n                Senator(name='Sotto III, Vicente C.'),\n                Senator(name='Drilon, Franklin M.'),\n                Senator(name='Pangilinan, Francis \"Kiko\" N.'),\n                Senator(name='Angara, Sonny')\n            ]\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 9, 21),\n            parliamentary_status='Period of Individual Amendments',\n            senators=None\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 9, 21),\n            parliamentary_status='Period of Interpellation Closed',\n            senators=None\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 9, 21),\n            parliamentary_status='Period of Individual Amendments Closed',\n            senators=None\n        ),\n        FloorActivity(\n            date=datetime.date(2021, 12, 15),\n            parliamentary_status='Sponsorship Speech on the Conference Committee Report',\n            senators=[Senator(name='Zubiri, Juan Miguel \"Migz\" F.')]\n        )\n    ],\n    votes=[\n        Vote(\n            type='Third Reading',\n            date=datetime.date(2021, 9, 27),\n            tally={\n                'Voted Yes': [\n                    Senator(name='Angara, Sonny'),\n                    Senator(name='Binay, Maria Lourdes Nancy S.'),\n                    Senator(name='Cayetano, Pia S.'),\n                    Senator(name='Dela Rosa, Ronald \"Bato\"'),\n                    Senator(name='Drilon, Franklin M.'),\n                    Senator(name='Gatchalian, Win'),\n                    Senator(name='Go, Christopher Lawrence T.'),\n                    Senator(name='Gordon, Richard J.'),\n                    Senator(name='Hontiveros, Risa'),\n                    Senator(name='Lacson, Panfilo \"Ping\" M.'),\n                    Senator(name='Lapid, Manuel \"Lito\" M.'),\n                    Senator(name='Marcos, Imee R.'),\n                    Senator(name='Pacquiao, Emmanuel \"Manny\" D.'),\n                    Senator(name='Pangilinan, Francis \"Kiko\" N.'),\n                    Senator(name='Poe, Grace'),\n                    Senator(name='Recto, Ralph G.'),\n                    Senator(name='Revilla Jr., Ramon Bong'),\n                    Senator(name='Sotto III, Vicente C.'),\n                    Senator(name='Tolentino, Francis \"Tol\" N.'),\n                    Senator(name='Villanueva, Joel'),\n                    Senator(name='Villar, Cynthia A.'),\n                    Senator(name='Zubiri, Juan Miguel \"Migz\" F.')\n                ],\n                'Voted No': [],\n                'Abstained': [Senator(name='Pimentel, Aquilino \"Koko\" III')]\n            }\n        )\n    ],\n    legislative_history=[\n        SenateBillStatus(\n            date=datetime.date(2021, 7, 26),\n            item='Prepared and submitted jointly by the Committees on JUSTICE AND HUMAN RIGHTS and WOMEN, CHILDREN,\nFAMILY RELATIONS AND GENDER EQUALITY with Senators RISA HONTIVEROS, JUAN MIGUEL \"MIGZ\" F. ZUBIRI, LEILA M. DE LIMA,\nWIN GATCHALIAN, MARIA LOURDES NANCY S. BINAY, IMEE R. MARCOS, RAMON BONG REVILLA JR. and RICHARD J. GORDON as \nauthors  per Committee Report No. 279, recommending its approval in substitution of S. Nos. 163, 305, 622, 739, \n762, 774, 1258 and 1853;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 2),\n            item='Committee Report Calendared for Ordinary Business;'\n        ),\n        SenateBillStatus(date=datetime.date(2021, 8, 2), item='Sponsor: Senator RICHARD J. GORDON;'),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 4),\n            item='Letter from Senator FRANCIS \"KIKO\" N. PANGILINAN requesting to be made co-author of SBN-2332, \nreceived by LBIS;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 25),\n            item='Transferred from the Calendar for Ordinary Business to the Calendar for  Special Order;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 25),\n            item='Sponsorship speech delivered by Senator RICHARD J. GORDON;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 25),\n            item='Co-sponsorship speech of Senators JUAN MIGUEL \"MIGZ\" F. ZUBIRI, RISA HONTIVEROS, JOEL VILLANUEVA,\nPIA S. CAYETANO, MARIA LOURDES NANCY S. BINAY, RAMON BONG REVILLA JR. and WIN GATCHALIAN;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 25),\n            item='Senators JOEL VILLANUEVA and PIA S. CAYETANO were made co-authors;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 8, 25),\n            item='Letter from Senator GRACE POE conveying her intention to be made co-author of SBN-2332, received \nby LBIS;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 20),\n            item='Interpellation/Remarks of Senator(s) RISA HONTIVEROS, PIA S. CAYETANO, JUAN MIGUEL \"MIGZ\" F. \nZUBIRI, PANFILO \"PING\" M. LACSON, VICENTE C. SOTTO III, FRANKLIN M. DRILON, FRANCIS \"KIKO\" N. PANGILINAN and SONNY \nANGARA;'\n        ),\n        SenateBillStatus(date=datetime.date(2021, 9, 21), item='Period of interpellation closed;'),\n        SenateBillStatus(date=datetime.date(2021, 9, 21), item='Period of individual amendments;'),\n        SenateBillStatus(date=datetime.date(2021, 9, 21), item='Period of individual amendments closed;'),\n        SenateBillStatus(date=datetime.date(2021, 9, 21), item='Approved on Second Reading with Amendments;'),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 22),\n            item='Printed copies were electronically distributed to the Senators;'\n        ),\n        SenateBillStatus(date=datetime.date(2021, 9, 27), item='Approved on Third Reading;'),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 27),\n            item='In favor:  (22) Senators SONNY ANGARA, MARIA LOURDES NANCY S. BINAY, PIA S. CAYETANO, RONALD \n\"BATO\" DELA ROSA, FRANKLIN M. DRILON, WIN GATCHALIAN, CHRISTOPHER LAWRENCE T. GO, RICHARD J. GORDON, RISA \nHONTIVEROS, PANFILO \"PING\" M. LACSON, MANUEL \"LITO\" M. LAPID, IMEE R. MARCOS, EMMANUEL \"MANNY\" D. PACQUIAO, FRANCIS\n\"KIKO\" N. PANGILINAN, GRACE POE, RALPH G. RECTO, RAMON BONG REVILLA JR., VICENTE C. SOTTO III, FRANCIS \"TOL\" N. \nTOLENTINO, JOEL VILLANUEVA, CYNTHIA A. VILLAR and JUAN MIGUEL \"MIGZ\" F. ZUBIRI;'\n        ),\n        SenateBillStatus(date=datetime.date(2021, 9, 27), item='Against:  (None) ;'),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 27),\n            item='Abstention:  (1) Senator AQUILINO \"KOKO\" III PIMENTEL;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 27),\n            item='Senate designated Senators Gordon, Zubiri, Angara, Lapid and Hontiveros as conferees to the \nconference committee on the disagreeing provisions of SBN-2332 and HBN-7836;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 9, 28),\n            item='Sent to the House of Representatives requesting for concurrence;'\n        ),\n        SenateBillStatus(date=datetime.date(2021, 10, 13), item='Conducted COMMITTEE MEETINGS/HEARINGS;'),\n        SenateBillStatus(date=datetime.date(2021, 10, 20), item='Conducted COMMITTEE MEETINGS/HEARINGS;'),\n        SenateBillStatus(\n            date=datetime.date(2021, 11, 8),\n            item='House of Representatives designated Representatives Deloso-Montalla, Romualdez (Y.M.),  Escudero,\nBenitez, Zubiri and Fortun as conferees to the Bicameral Conference Committee on the disagreeing provisions of SBN-\n2332 and HBN-7836 on September 29, 2021,'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 11, 8),\n            item='House of Representatives designated Representative Brosas as its additional conferee to the \nBicameral Conference Committee on the disagreeing provision of HBN-7836 and SBN-2332 on September 30, 2021;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 12, 14),\n            item='Conference Committee Report on the disagreeing provisions of SBN-2332 and HBN-7836 submitted to \nthe Senate, recommending that SBN-2332, in consolidation with HBN-7836, be approved in accordance with the attached\ncopy of the bill as reconciled and approved by the conferees;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 12, 15),\n            item='Sponsorship speech on the conference committee report of Senator JUAN MIGUEL \"MIGZ\" F. ZUBIRI;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2021, 12, 15),\n            item='Conference Committee Report Approved by the Senate;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2022, 1, 17),\n            item='Conference Committee Report Approved by the House of Representatives on December 14, 2021;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2022, 1, 25),\n            item='Letter from Senate Secretary Myra Marie D. Villarica transmitting nine (9) enrolled copies of the\nconsolidated version of SBN-2332 and HBN-7836, for the signature of Speaker Lord Allan Jay Q. Velasco and Secretary\nGeneral Mark Llandro L. Mendoza;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2022, 2, 2),\n            item='Letter for Senate Secretary Myra Marie D. Villarica, dated January 31, 2022, returning eight (8) \nenrolled copies of the consolidated version of SBN-2332  and HBN-7836, which were signed by Speaker Lord Allan Jay \nQ. Velasco and Secretary General Mark Llandro L. Mendoza;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2022, 2, 3),\n            item='Enrolled copies of the consolidated version of SBN-2332 and HBN-7836, sent to the Office of the \nPresident  through PLLO for the signature of the President of the Philippines, His Excellency, President Rodrigo \nRoa Duterte;'\n        ),\n        SenateBillStatus(\n            date=datetime.date(2022, 3, 8),\n            item='Approved and signed into law, in consolidation with HBN-7836, by the President of the \nPhilippines, His Excellency, President Rodrigo Roa Duterte on March 4, 2022 and became'\n        ),\n        SenateBillStatus(date=datetime.date(2022, 3, 8), item='REPUBLIC ACT NO. 11648.')\n    ]\n)\n\n\n\nWe then want to extract a series of Senate Bills from a particular congress. The listing is paginated, so we create a generator function that eventually returns all of the bills in that congress:\n\n\n\nSenateWebsite.generate_bills\n\n SenateWebsite.generate_bills (congress:int,\n                               expire_after:Union[int,datetime.timedelta]=\n                               -1)\n\nGenerator function that eventually produces all bills from a congress.\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ncongress\nint\n\nNumber of the congress from which to fetch bills\n\n\nexpire_after\nUnion\n-1\nCache expiration\n\n\nReturns\nGenerator\n\n\n\n\n\n\nsenate = SenateWebsite()\nprint(list(islice(senate.generate_bills(19), 2)))\n\n[\n    SenateBill(\n        url='http://legacy.senate.gov.ph/lis/bill_res.aspx?q=SBN-1332&congress=19',\n        congress=19,\n        billno='SBN-1332',\n        congress_text='19th Congress',\n        billno_text='Senate Bill No. 1332',\n        title='CIVIL SERVICE ELIGIBILITY TO GOVERNMENT EMPLOYEES',\n        long_title='AN ACT GRANTING CIVIL SERVICE ELIGIBILITY TO GOVERNMENT EMPLOYEES WHOSE STATUS OF APPOINTMENT \nIS EITHER CASUAL OR CONTRACTUAL, AND WHO HAVE CONTINUOUSLY RENDERED AT LEAST SEVEN (7) YEARS OF EFFICIENT SERVICE',\n        filing_date=datetime.date(2022, 9, 19),\n        filers=[Senator(name='Marcos, Imee R.')],\n        links=[Link(url='http://legacy.senate.gov.ph/lisdata/3944835844!.pdf', name='SBN-1332 (as filed)')],\n        scope='National',\n        legislative_status=SenateBillStatus(date=datetime.date(2022, 9, 21), item='Pending in the Committee'),\n        subjects=[\n            Subject(name='Civil Service Eligibility'),\n            Subject(name='Government Employees (Casual/Contractual)')\n        ],\n        primary_committee=[\n            SenateCommittee(name='Civil Service, Government Reorganization and Professional Regulation')\n        ],\n        secondary_committee=None,\n        committee_reports=None,\n        sponsors=None,\n        cosponsors=None,\n        document_certification=None,\n        floor_activity=None,\n        votes=None,\n        legislative_history=[\n            SenateBillStatus(date=datetime.date(2022, 9, 19), item='Introduced by Senator IMEE R. MARCOS;'),\n            SenateBillStatus(\n                date=datetime.date(2022, 9, 21),\n                item='Read on First Reading and Referred to the Committee on CIVIL SERVICE, GOVERNMENT \nREORGANIZATION AND PROFESSIONAL REGULATION;'\n            )\n        ]\n    ),\n    SenateBill(\n        url='http://legacy.senate.gov.ph/lis/bill_res.aspx?q=SBN-1331&congress=19',\n        congress=19,\n        billno='SBN-1331',\n        congress_text='19th Congress',\n        billno_text='Senate Bill No. 1331',\n        title='PHILIPPINE CITIZENSHIP TO BRIAN TO',\n        long_title='AN ACT GRANTING PHILIPPINE CITIZENSHIP TO BRIAN TO',\n        filing_date=datetime.date(2022, 9, 19),\n        filers=[Senator(name='Marcos, Imee R.')],\n        links=[Link(url='http://legacy.senate.gov.ph/lisdata/3944635843!.pdf', name='SBN-1331')],\n        scope='National',\n        legislative_status=SenateBillStatus(date=datetime.date(2022, 9, 21), item='Pending in the Committee'),\n        subjects=[Subject(name='Citizenship')],\n        primary_committee=[SenateCommittee(name='Rules')],\n        secondary_committee=None,\n        committee_reports=None,\n        sponsors=None,\n        cosponsors=None,\n        document_certification=None,\n        floor_activity=None,\n        votes=None,\n        legislative_history=[\n            SenateBillStatus(date=datetime.date(2022, 9, 19), item='Introduced by Senator IMEE R. MARCOS;'),\n            SenateBillStatus(\n                date=datetime.date(2022, 9, 21),\n                item='Read on First Reading and Referred to the Committee on RULES;'\n            )\n        ]\n    )\n]\n\n\n\nWe then create a simple function to materialize that generator function into the final list of bills. Because we don’t expect that congress data will change when it is complete, we memoize this function to disk to increase performance and set the stage for continued pipeline in the future.\n\n\n\nSenateWebsite.fetch_bills\n\n SenateWebsite.fetch_bills (congress:int,\n                            expire_after:Union[int,datetime.timedelta]=-1)\n\nFetch all the bills from a certain congress\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ncongress\nint\n\nCongress from which to fetch bills\n\n\nexpire_after\nUnion\n-1\nCache expiration\n\n\nReturns\nList\n\n\n\n\n\nIn order to retrieve all bills from all congresses, then we’d need to fetch all congress numbers. We retrieve that by scraping the dropdown menu in the LIS.\n\n\n\nSenateWebsite.get_congresses\n\n SenateWebsite.get_congresses (expire_after=0)\n\nRetrieve a list of all congresses available on the website.\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nexpire_after\nint\n0\n\n\n\nReturns\nList\n\nCache expiration time\n\n\n\n\nsenate = SenateWebsite()\nsenate.get_congresses()\n\n[19, 18, 17, 16, 15, 14, 13]\n\n\nFinally, fetching all bills requires chaining together all of those generator functions into one very big list of Senate Bills.\n\n\n\nSenateWebsite.fetch_all_bills\n\n SenateWebsite.fetch_all_bills (refresh_current_congress:bool=True)\n\nReturns all bills from all congresses.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nrefresh_current_congress\nbool\nTrue\nDo not use the cache for the current congress"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "LegisPH",
    "section": "",
    "text": "This project aims to:\n\ncompile a quantitative dataset on the legislative process for Republic Acts in the Philippines and make that available publicly,\napply some process analysis tools to shed light on the efficiency of the legislative process, and\nprovide interactive tools for citizens to explore that data on their own."
  },
  {
    "objectID": "01-website.html",
    "href": "01-website.html",
    "title": "Website",
    "section": "",
    "text": "Website\n\n Website (cache_name:str, cache_dir:pathlib.Path,\n          cache_methods:tuple=('GET', 'HEAD', 'POST'),\n          user_agent:str='legisph (code@tjpalanca.com)')\n\nRepresents a Website. You can make cached requests to the website by using the self.session object.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ncache_name\nstr\n\nName of the cache\n\n\ncache_dir\nPath\n\nPath in which to store the cache\n\n\ncache_methods\ntuple\n(‘GET’, ‘HEAD’, ‘POST’)\nMethods to cache\n\n\nuser_agent\nstr\nlegisph (code@tjpalanca.com)\nUser agent when scraping\n\n\n\nIn cases where we are unable to successfully parse, we create custom exceptions to know whether this is something we can act on or if it is something we cannot solve.\n\n\n\nParsingError\n\n ParsingError (message:str, resource:str)\n\nRaised when there are issues parsing the exception\n\n\n\nServerError\n\n ServerError (message:str, resource:str)\n\nRaised when the server reports an internal error.\n\n\n\nNotFoundError\n\n NotFoundError (message:str, resource:str)\n\nRaised when the resource is not found.\n\n\n\nWebsiteException\n\n WebsiteException (message:str, resource:str)\n\nGeneral class for exceptions from a website. Has a resource string that can be accessed to know about the problem.\nSome objects are common across different website and we define them below.\n\n\n\nLink\n\n Link (url:str, name:Optional[str]=None)\n\nA link to a resource on the internet"
  },
  {
    "objectID": "02c-senate-extraction.html",
    "href": "02c-senate-extraction.html",
    "title": "Extracting Senate Data",
    "section": "",
    "text": "We extract all the data from the Senate website (this takes a while, so I suggest retrieving a cache from somewhere else and only refreshing the latest Congress data.\n\nsenate = SenateWebsite()\n\n\nbills = senate.fetch_all_bills()\nerrors = list(filter(lambda x: isinstance(x, Exception), bills))\nprint(\n    f\"\"\"\n    {len(bills)} bills attempted.\n    {len(errors)} server errors found.\n    {len(bills) - len(errors)} bills successfully collected.\n    \"\"\"\n)\n\n    19396 bills attempted.\n    19 server errors found.\n    19377 bills successfully collected.\n    \n\n\n\nWe pickle it out for future use.\n\nwith open(\".cache/senate/senate_bills.pickle\", \"wb\") as f:\n    pickle.dump(bills, f, protocol=pickle.HIGHEST_PROTOCOL)"
  },
  {
    "objectID": "00-core.html",
    "href": "00-core.html",
    "title": "Core",
    "section": "",
    "text": "We define standard logging utilities for this package."
  }
]